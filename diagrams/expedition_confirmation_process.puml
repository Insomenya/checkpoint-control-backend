@startuml Expedition Confirmation Process

title Процесс подтверждения экспедиции

skinparam activityBorderColor black
skinparam activityBackgroundColor LightGreen
skinparam arrowColor DarkGreen

|Оператор КПП|
start
:Авторизоваться в системе;

|#AntiqueWhite|Система|
:Определить зону КПП оператора;
:Отобразить список экспедиций
для подтверждения в данной зоне;

|Оператор КПП|
:Выбрать экспедицию
для проверки;

|Система|
:Отобразить детали экспедиции:
- Данные водителя/представителя
- Данные ТС
- Направление
- Накладные
- Список товаров;

|Оператор КПП|
:Проверить документы и груз;

if (Всё соответствует?) then (да)
  :Выбрать статус "Подтверждено";
else (нет)
  :Выбрать статус "Отклонено";
endif

:Подтвердить решение;

|Система|
:Создать запись о подтверждении;
:Сохранить информацию:
- ID экспедиции
- ID пользователя-оператора
- ID зоны
- Статус
- Дата и время подтверждения;

note right
  Для каждой экспедиции должна быть
  последовательность подтверждений
  в соответствии с направлением
end note

if (Это подтверждение в последней зоне?) then (да)
  :Установить дату завершения экспедиции;
else (нет)
endif

:Вернуть результат подтверждения;

|Оператор КПП|
:Перейти к списку экспедиций;

stop

@enduml 